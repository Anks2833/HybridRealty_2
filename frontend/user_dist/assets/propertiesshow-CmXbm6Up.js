import{r as l,d as B,j as e,b as k,B as P,y as o}from"./index-DXzqZs6Y.js";import{P as F}from"./index-nZwr5w8z.js";import{m as n}from"./proxy-BeJCh03b.js";import{S as $}from"./search-D84qNF6G.js";import{A as I}from"./arrow-right-DBDWBIVz.js";import{H as L}from"./heart-CoQmALe3.js";import{A as D}from"./index-DHRI3Ziy.js";import{E as R}from"./eye-BPOAh6Hd.js";import{M as q}from"./map-pin-DGa_vYXv.js";import{B as M}from"./bed-double-BCFbxCF1.js";import{B as z}from"./bath-DRWhQ93w.js";import{M as H}from"./maximize-DVTKYTEm.js";import{B as V}from"./building-B_R1Q3pS.js";import{I as y}from"./indian-rupee-DiwZYIeJ.js";import"./createLucideIcon-B7oRjKWa.js";const C=({property:t})=>{const u=B(),[b,p]=l.useState(!1),[c,h]=l.useState(!1);l.useEffect(()=>{f()},[t._id]);const d=s=>{if(!s)return"—";let r=s;typeof s=="string"&&s.includes("₹")&&(r=s.replace(/[₹,\s]/g,""));const i=Number(r);if(isNaN(i))return s;if(i>=1e7){const m=(i/1e7).toLocaleString("en-IN",{maximumFractionDigits:2,minimumFractionDigits:i%1e7===0?0:1});return e.jsxs("div",{className:"flex items-baseline",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:m}),e.jsx("span",{className:"ml-1 text-xs font-medium",children:"Cr"})]})}else if(i>=1e5){const m=(i/1e5).toLocaleString("en-IN",{maximumFractionDigits:2,minimumFractionDigits:i%1e5===0?0:1});return e.jsxs("div",{className:"flex items-baseline",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:m}),e.jsx("span",{className:"ml-1 text-xs font-medium",children:"L"})]})}else return e.jsxs("div",{className:"flex items-baseline",children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:i.toLocaleString("en-IN")})]})},f=async()=>{try{const s=localStorage.getItem("token");if(!s)return;const r=await k.get(`${P}/api/users/check-favorite/${t._id}`,{headers:{Authorization:`Bearer ${s}`}});h(r.data.isFavorite)}catch(s){console.error("Error checking favorite status:",s),s.response?(console.error("Error details:",{data:s.response.data,status:s.response.status,headers:s.response.headers}),s.response.status===401?o.error("Please log in again"):o.error("Failed to check favorite status")):s.request?(console.error("No response received:",s.request),o.error("Network error. Please check your connection.")):(console.error("Error setting up request:",s.message),o.error("An unexpected error occurred")),h(!1)}},j=()=>{u(`/properties/single/${t._id}`)},g=async s=>{s.stopPropagation(),console.log("property card fav button clicked");try{const r=localStorage.getItem("token");if(!r){o.error("Please log in to add properties to your favorites");return}const i=await k.post(`${P}/api/users/toggle-wishlist`,{propertyId:t._id},{headers:{Authorization:`Bearer ${r}`}});i.data.success?(h(!c),i.data.isInWishlist?o.success(`${t.title} added to favorites`):o.success(`${t.title} removed from favorites`)):o.error(i.data.message||"Failed to update favorites")}catch(r){if(r.response)switch(console.error("Detailed error response:",{data:r.response.data,status:r.response.status,headers:r.response.headers}),r.response.status){case 401:o.error("Unauthorized. Please log in again.");break;case 404:o.error("Property not found");break;case 500:o.error("Server error. Please try again later.");break;default:o.error(r.response.data.message||"An unexpected error occurred while updating favorites")}else r.request?(console.error("No response received:",r.request),o.error("No response from server. Please check your internet connection.")):(console.error("Error setting up request:",r.message),o.error("An unexpected error occurred"))}};return e.jsxs(n.div,{whileHover:{y:-8},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:j,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsxs("div",{className:"relative h-64",children:[e.jsx("img",{src:t.image[0],alt:t.title,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[e.jsx("span",{className:"bg-[var(--theme-color-1)] text-white text-xs font-medium px-3 py-1.5 rounded-full shadow-md",children:t.type}),e.jsxs("span",{className:`text-xs font-medium px-3 py-1.5 rounded-full shadow-md 
            ${t.availability==="Rent"?"bg-[var(--theme-rent-tag)] text-white":"bg-[var(--theme-sell-tag)] text-white"}`,children:["For ",t.availability]})]}),e.jsx("button",{onClick:s=>{s.stopPropagation(),g(s)},className:`absolute top-4 right-4 p-2 rounded-full transition-all duration-300 z-[10]
            ${c?"bg-red-500 text-white":"bg-white/80 backdrop-blur-sm text-gray-700 hover:text-red-500"}`,"aria-label":c?"Remove from favorites":"Add to favorites",children:e.jsx(L,{className:`w-5 h-5 ${c?"fill-current":""}`})}),e.jsx(D,{children:b&&e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-transparent flex items-center justify-center",children:e.jsxs(n.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"px-5 py-3 bg-white text-[var(--theme-color-1)] rounded-lg font-medium flex items-center gap-2 shadow-lg",children:[e.jsx(R,{className:"w-5 h-5"}),"View Details"]})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 line-clamp-1 group-hover:text-[var(--theme-color-1)] transition-colors",children:t.title}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[e.jsx(q,{className:"h-4 w-4 mr-2 flex-shrink-0 text-[var(--theme-hover-color-1)]"}),e.jsx("span",{className:"line-clamp-1",children:t.location})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-y border-gray-100 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4 text-[var(--theme-hover-color-1)]"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.beds," ",t.beds>1?"Beds":"Bed"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4 text-[var(--theme-hover-color-1)]"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.baths," ",t.baths>1?"Baths":"Bath"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-4 h-4 text-[var(--theme-hover-color-1)]"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.sqft," sqft"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center text-[var(--theme-color-1)] font-bold",children:d(t.price)}),e.jsxs("div",{className:"text-sm bg-blue-50 text-[var(--theme-hover-color-1)] px-2 py-1 rounded-md flex items-center",children:[e.jsx(V,{className:"w-3.5 h-3.5 mr-1"}),t.availability==="Rent"?"Rental":"Purchase"]})]})]})]})},ae=()=>{var S;const[t,u]=l.useState([]),[b,p]=l.useState(!0),[c,h]=l.useState(null),[d,f]=l.useState("all"),j=B(),g=[{id:"all",label:"All Properties"},{id:"apartment",label:"Apartments"},{id:"villa",label:"Villas"},{id:"house",label:"Houses"},{id:"farmhouse",label:"farmhouse"},{id:"commercial properties",label:"commercial properties"},{id:"shops",label:"shops"},{id:"office spaces",label:"office spaces"},{id:"plots/lands",label:"plots/lands"}],s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},r={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},[i,m]=l.useState(!1),N=l.useRef(null);l.useEffect(()=>{function a(x){N.current&&!N.current.contains(x.target)&&m(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),l.useEffect(()=>{(async()=>{try{p(!0);const x=await k.get(`${P}/api/products/list`);if(x.data.success){const v=x.data.property.filter(w=>w.isApproved&&w.lp===!1&&w.invest=="").slice(0,6);u(v)}else h("Failed to fetch properties"),u(t.filter(v=>v.isApproved))}catch(x){console.error("Error fetching properties:",x),h("Failed to load properties. Using sample data instead."),u(t.filter(v=>v.isApproved))}finally{p(!1)}})()},[]);const A=d==="all"?t:t.filter(a=>a.type.toLowerCase()===d),E=()=>{j("/properties")};return b?e.jsx("div",{className:"py-20 px-auto bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/3 mx-auto mb-4"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/4 mx-auto mb-16"}),e.jsx("div",{className:"h-10 bg-gray-100 rounded-lg w-full max-w-md mx-auto mb-8 flex justify-center gap-4",children:[1,2,3,4].map(a=>e.jsx("div",{className:"h-8 bg-gray-200 rounded-full w-24"},a))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(a=>e.jsxs("div",{className:"bg-white rounded-xl shadow h-96",children:[e.jsx("div",{className:"h-64 bg-gray-200 rounded-t-xl"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"})]})]})]},a))})]})})}):e.jsxs("section",{className:"py-12 bg-gradient-to-b from-white to-gray-50",children:[e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16 mt-2",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mt-2 mb-4",children:"Featured Properties"}),e.jsx("div",{className:"w-24 h-1 bg-[var(--theme-color-1)] mx-auto mb-6"})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16"}),e.jsxs(n.div,{className:"flex flex-wrap justify-center gap-4 mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsx("div",{className:"hidden md:flex flex-wrap gap-2",children:g.map(a=>e.jsx("button",{onClick:()=>f(a.id),className:`px-6 py-2.5 rounded-full font-medium text-sm transition-all duration-200
        ${d===a.id?"bg-[var(--theme-color-1)] text-white shadow-lg shadow-[var(--theme-color-1)]/20":"bg-white text-gray-700 hover:bg-gray-100 shadow-sm"}`,children:a.label},a.id))}),e.jsxs("div",{className:"relative md:hidden flex justify-end",ref:N,children:[e.jsxs("button",{onClick:()=>m(!i),className:`flex items-center justify-center w-[200px] gap-2 px-4 py-2.5 rounded-full font-medium text-sm shadow-md\r
      bg-[var(--theme-color-1)] text-white border border-[var(--theme-color-1)]/20 backdrop-blur-sm\r
      transition-all duration-200 hover:shadow-lg hover:shadow-[var(--theme-color-1)]/10`,children:[e.jsx("span",{className:"mr-1",children:((S=g.find(a=>a.id===d))==null?void 0:S.label)||"Select Category"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform duration-300 ease-in-out ${i?"rotate-180":""}`,children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),i&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-60 z-20 bg-white rounded-lg shadow-xl overflow-hidden border border-gray-100",children:e.jsx("div",{className:"max-h-64 overflow-y-auto py-1",children:g.map(a=>e.jsx("button",{onClick:()=>{f(a.id),m(!1)},className:`w-full text-left px-4 py-3 text-sm transition-all
              ${d===a.id?"bg-gray-50 text-[var(--theme-color-1)] font-medium border-l-4 border-[var(--theme-color-1)]":"text-gray-700 hover:bg-gray-50 border-l-4 border-transparent"}`,children:a.label},a.id))})})]})]}),c&&e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},className:"text-amber-700 bg-amber-50 p-4 rounded-lg border border-amber-200 mb-8 max-w-md mx-auto text-center",children:[e.jsxs("p",{className:"font-medium mb-1",children:["Note: ",c]}),e.jsx("p",{className:"text-sm",children:"Showing sample properties for demonstration."})]}),A.length>0?e.jsx(n.div,{variants:s,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:A.map(a=>e.jsx(n.div,{variants:r,children:e.jsx(C,{property:a})},a._id))}):e.jsxs("div",{className:"text-center py-10 bg-white rounded-xl shadow-sm",children:[e.jsx($,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:"No properties available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No properties found in this category."}),e.jsx("button",{onClick:()=>f("all"),className:"px-6 py-2 bg-[var(--theme-color-1)] text-white rounded-lg hover:bg-[var(--theme-hover-color-1)] transition-colors",children:"View All Properties"})]}),e.jsxs(n.div,{className:"mt-16 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[e.jsxs("button",{onClick:E,className:"inline-flex items-center px-6 py-3 bg-[var(--theme-color-1)] text-white rounded-lg hover:bg-[var(--theme-hover-color-1)] transition-colors shadow-lg shadow-[var(--theme-color-1)]/20 font-medium",children:["Browse All Properties",e.jsx(I,{className:"ml-2 w-4 h-4"})]}),e.jsx("p",{className:"text-gray-600 mt-4 text-sm",children:"Discover our complete collection of premium properties"})]})]})]})};C.propTypes={property:F.object.isRequired};export{ae as default};
