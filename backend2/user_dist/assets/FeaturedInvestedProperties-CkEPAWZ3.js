import{r as l,x as A,j as e,m as o,T as y,t as k,v as I,Z as n,p as $,H as B,A as L,M as q,W as F,Q as D,U as R,K as M,P as H}from"./index-BYyK-jQS.js";import{A as z}from"./arrow-right-CrM_f3p8.js";import{E as V}from"./eye-DSNUVYn1.js";const E=({property:t})=>{const j=A(),[N,p]=l.useState(!1),[c,x]=l.useState(!1),d=s=>{if(!s)return"—";let r=s;typeof s=="string"&&s.includes("₹")&&(r=s.replace(/[₹,\s]/g,""));const i=Number(r);if(isNaN(i))return s;if(i>=1e7){const u=(i/1e7).toLocaleString("en-IN",{maximumFractionDigits:2,minimumFractionDigits:i%1e7===0?0:1});return e.jsxs(e.Fragment,{children:[u,e.jsx("span",{className:"ml-1 text-sm font-medium",children:"Cr"})]})}else if(i>=1e5){const u=(i/1e5).toLocaleString("en-IN",{maximumFractionDigits:2,minimumFractionDigits:i%1e5===0?0:1});return e.jsxs(e.Fragment,{children:[u,e.jsx("span",{className:"ml-1 text-sm font-medium",children:"L"})]})}else return i.toLocaleString("en-IN")};l.useEffect(()=>{g()},[t._id]);const g=async()=>{try{const s=localStorage.getItem("token");if(!s)return;const r=await k.get(`${I}/api/users/check-favorite/${t._id}`,{headers:{Authorization:`Bearer ${s}`}});x(r.data.isFavorite)}catch(s){console.error("Error checking favorite status:",s),s.response?(console.error("Error details:",{data:s.response.data,status:s.response.status,headers:s.response.headers}),s.response.status===401?n.error("Please log in again"):n.error("Failed to check favorite status")):s.request?(console.error("No response received:",s.request),n.error("Network error. Please check your connection.")):(console.error("Error setting up request:",s.message),n.error("An unexpected error occurred")),x(!1)}},w=async s=>{s.stopPropagation();try{const r=localStorage.getItem("token");if(!r){n.error("Please log in to add properties to your favorites");return}const i=await k.post(`${I}/api/users/toggle-wishlist`,{propertyId:t._id},{headers:{Authorization:`Bearer ${r}`}});i.data.success?(x(!c),i.data.isInWishlist?n.success(`${t.title} added to favorites`):n.success(`${t.title} removed from favorites`)):n.error(i.data.message||"Failed to update favorites")}catch(r){if(r.response)switch(console.error("Detailed error response:",{data:r.response.data,status:r.response.status,headers:r.response.headers}),r.response.status){case 401:n.error("Unauthorized. Please log in again.");break;case 404:n.error("Property not found");break;case 500:n.error("Server error. Please try again later.");break;default:n.error(r.response.data.message||"An unexpected error occurred while updating favorites")}else r.request?(console.error("No response received:",r.request),n.error("No response from server. Please check your internet connection.")):(console.error("Error setting up request:",r.message),n.error("An unexpected error occurred"))}},b=()=>{j(`/properties/single/${t._id}`)},m=t.invest||t.monthlyRent||0,f=(Number(m)*12/Number(t.price)*100).toFixed(2);return(Number(t.price)/(Number(m)*12)).toFixed(1),e.jsxs(o.div,{whileHover:{y:-8},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:b,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsxs("div",{className:"relative h-64",children:[e.jsx("img",{src:t.image[0],alt:t.title,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[e.jsx("span",{className:"bg-[var(--theme-color-1)] text-white text-xs font-medium px-3 py-1.5 rounded-full shadow-md",children:t.type}),e.jsxs("span",{className:"bg-[var(--theme-investment-card-tag)] text-white text-xs font-medium px-3 py-1.5 rounded-full shadow-md flex items-center gap-1",children:[e.jsx(y,{className:"w-3 h-3"}),"Investment"]}),t.serialNumber&&e.jsxs("span",{className:"bg-black/70 text-white text-xs font-medium px-3 py-1.5 rounded-full shadow-md flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),t.serialNumber]})]}),e.jsx("button",{onClick:s=>{s.stopPropagation(),w(s)},className:`absolute top-4 right-4 p-2 rounded-full transition-all duration-300 z-[10]
            ${c?"bg-red-500 text-white":"bg-white/80 backdrop-blur-sm text-gray-700 hover:text-red-500"}`,"aria-label":c?"Remove from favorites":"Add to favorites",children:e.jsx(B,{className:`w-5 h-5 ${c?"fill-current":""}`})}),e.jsx(L,{children:N&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-transparent flex items-center justify-center",children:e.jsxs(o.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"px-5 py-3 bg-white text-blue-500 rounded-lg font-medium flex items-center gap-2 shadow-lg",children:[e.jsx(V,{className:"w-5 h-5"}),"View Investment"]})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 line-clamp-1 group-hover:text-blue-500 transition-colors",children:t.title}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[e.jsx(q,{className:"h-4 w-4 mr-2 flex-shrink-0 text-blue-500"}),e.jsx("span",{className:"line-clamp-1",children:t.location})]}),e.jsx("div",{className:"bg-green-50 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700 font-medium",children:"Monthly Income"}),e.jsxs("div",{className:"flex items-center text-green-500 font-bold",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:d(m)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700 font-medium",children:"Annual Return"}),e.jsxs("p",{className:"font-bold text-green-500",children:[f,"%"]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-y border-gray-100 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.beds," ",t.beds>1?"Beds":"Bed"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.baths," ",t.baths>1?"Baths":"Bath"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.sqft," sqft"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-[var(--theme-color-1)] font-bold",children:[e.jsx(F,{className:"h-5 w-5 mr-1"}),e.jsx("span",{className:"text-xl",children:d(t.price)})]}),e.jsxs("div",{className:"text-sm bg-green-50 text-green-700 px-2 py-1 rounded-md flex items-center",children:[e.jsx(y,{className:"w-3.5 h-3.5 mr-1"}),"Investment"]})]})]})]})},O=()=>{var P;const[t,j]=l.useState([]),[N,p]=l.useState(!0),[c,x]=l.useState(null),[d,g]=l.useState("all"),w=A(),[b,m]=l.useState(!1),f=l.useRef(null),s=[{id:"all",label:"All Properties"},{id:"apartment",label:"Apartments"},{id:"villa",label:"Villas"},{id:"house",label:"Houses"},{id:"farmhouse",label:"farmhouse"},{id:"commercial properties",label:"commercial properties"},{id:"shops",label:"shops"},{id:"office spaces",label:"office spaces"},{id:"plots/lands",label:"plots/lands"}];l.useEffect(()=>{function a(h){f.current&&!f.current.contains(h.target)&&m(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const r={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}};l.useEffect(()=>{(async()=>{try{p(!0);const h=await k.get(`${I}/api/products/list`);if(h.data.success){const S=h.data.property.filter(v=>v.isApproved&&v.lp===!1&&(v.invest&&v.invest!==""||v.isForInvestment)).slice(0,6);j(S)}else x("Failed to fetch investment properties")}catch(h){console.error("Error fetching investment properties:",h),x("Failed to load investment properties. Using sample data instead.")}finally{p(!1)}})()},[]);const u=d==="all"?t:t.filter(a=>a.type.toLowerCase()===d),C=()=>{w("/investments")};return N?e.jsx("div",{className:"py-20 bg-blue-50/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 bg-blue-200/50 rounded w-1/3 mx-auto mb-4"}),e.jsx("div",{className:"h-5 bg-blue-100/50 rounded w-1/4 mx-auto mb-16"}),e.jsx("div",{className:"h-10 bg-blue-100/30 rounded-lg w-full max-w-md mx-auto mb-8 flex justify-center gap-4",children:[1,2,3,4].map(a=>e.jsx("div",{className:"h-8 bg-blue-200/40 rounded-full w-24"},a))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(a=>e.jsxs("div",{className:"bg-white rounded-xl shadow h-96",children:[e.jsx("div",{className:"h-64 bg-blue-100/50 rounded-t-xl"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-blue-100/50 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-blue-100/30 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-6 bg-blue-100/40 rounded w-1/3"}),e.jsx("div",{className:"h-6 bg-blue-100/40 rounded w-1/4"})]})]})]},a))})]})})}):e.jsx("section",{className:"py-24 bg-gradient-to-b from-white to-blue-50/20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mt-2 mb-4",children:"Invest"}),e.jsx("div",{className:"w-24 h-1 bg-blue-500 mx-auto mb-6"})]}),e.jsxs(o.div,{className:"flex flex-wrap justify-center gap-4 mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsx("div",{className:"hidden md:flex flex-wrap gap-2",children:s.map(a=>e.jsx("button",{onClick:()=>g(a.id),className:`px-6 py-2.5 rounded-full font-medium text-sm transition-all duration-200
          ${d===a.id?"bg-blue-500 text-white shadow-lg shadow-blue-500/20":"bg-white text-gray-700 hover:bg-gray-100 shadow-sm"}`,children:a.label},a.id))}),e.jsxs("div",{className:"relative md:hidden flex justify-end w-full",ref:f,children:[e.jsxs("button",{onClick:()=>m(!b),className:`flex items-center justify-center w-[200px] gap-2 px-4 py-2.5 rounded-full font-medium text-sm shadow-md\r
        bg-blue-500 text-white border border-blue-500/20 \r
        transition-all duration-200 hover:shadow-lg hover:shadow-blue-500/10`,children:[e.jsx("span",{children:((P=s.find(a=>a.id===d))==null?void 0:P.label)||"Select Category"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform duration-300 ease-in-out ${b?"rotate-180":""}`,children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),b&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-60 z-20 bg-white rounded-lg shadow-xl overflow-hidden border border-gray-100",children:e.jsx("div",{className:"max-h-64 overflow-y-auto py-1",children:s.map(a=>e.jsx("button",{onClick:()=>{g(a.id),m(!1)},className:`w-full text-left px-4 py-3 text-sm transition-all
                ${d===a.id?"bg-gray-50 text-blue-500 font-medium border-l-4 border-blue-500":"text-gray-700 hover:bg-gray-50 border-l-4 border-transparent"}`,children:a.label},a.id))})})]})]}),c&&e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"text-blue-700 bg-blue-50 p-4 rounded-lg border border-blue-200 mb-8 max-w-md mx-auto text-center",children:[e.jsxs("p",{className:"font-medium mb-1",children:["Note: ",c]}),e.jsx("p",{className:"text-sm",children:"Showing sample investment properties for demonstration."})]}),u.length>0?e.jsx(o.div,{variants:r,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(a=>e.jsx(o.div,{variants:i,children:e.jsx(E,{property:a})},a._id))}):e.jsxs("div",{className:"text-center py-10 bg-white rounded-xl shadow-sm",children:[e.jsx(y,{className:"w-12 h-12 text-blue-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:"No investment properties available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No investment properties found in this category."}),e.jsx("button",{onClick:()=>g("all"),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"View All Investments"})]}),e.jsxs(o.div,{className:"mt-16 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[e.jsxs("button",{onClick:C,className:"inline-flex items-center px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-lg shadow-blue-500/20 font-medium",children:["Browse All Investment Properties",e.jsx(z,{className:"ml-2 w-4 h-4"})]}),e.jsx("p",{className:"text-gray-600 mt-4 text-sm",children:"Explore our complete collection of investment opportunities with attractive returns"})]})]})})};E.propTypes={property:H.object.isRequired};export{O as default};
