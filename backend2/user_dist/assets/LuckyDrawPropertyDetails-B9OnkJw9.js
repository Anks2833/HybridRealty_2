import{c as se,w as te,r,x as ae,u as re,j as e,m as d,g as y,z as F,y as I,a3 as ie,I as le,a2 as ne,D as N,a4 as v,A as T,O as ce,C as de,M as w,Q as oe,U as me,K as xe,d as he,t as k,v as D,Z as n}from"./index-BYyK-jQS.js";import{G as p}from"./gift-BcEmb8mP.js";import{U as ge}from"./user-D9ykPvrj.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=se("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),je=()=>{var W;const{id:o}=te(),[s,L]=r.useState(null),[V,R]=r.useState(!0),[C,f]=r.useState(null),[m,x]=r.useState(0),[q,S]=r.useState(!1),[E,P]=r.useState(!1),[H,h]=r.useState(!1),[g,z]=r.useState(""),Y=ae(),{isLoggedIn:O,user:M}=re(),[i,G]=r.useState(null),[_,U]=r.useState(!1);r.useEffect(()=>{(async()=>{try{R(!0);const t=await k.get(`${D}/api/lucky-draw/property/${o}`);t.data.success?(L(t.data.property),f(null),t.data.property&&K(t.data.property._id)):f(t.data.message||"Failed to load property details.")}catch(t){console.error("Error fetching lucky draw property details:",t),f("Failed to load property details. Please try again.")}finally{R(!1)}})()},[o]);const K=async a=>{try{U(!0);const t=await k.get(`${D}/api/lucky-draw/winner/${a}`);t.data.success?G(t.data.winner):console.error("Failed to fetch winner details:",t.data.message)}catch(t){console.error("Error fetching winner details:",t)}finally{U(!1)}};r.useEffect(()=>{window.scrollTo(0,0)},[o]);const j=r.useCallback(a=>{s&&(a.key==="ArrowLeft"?x(t=>t===0?s.image.length-1:t-1):a.key==="ArrowRight"&&x(t=>t===s.image.length-1?0:t+1))},[s]);r.useEffect(()=>(window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)),[j]);const Q=async()=>{try{navigator.share?await navigator.share({title:s.title,text:`Check out this lucky draw property: ${s.title}`,url:window.location.href}):(await navigator.clipboard.writeText(window.location.href),S(!0),setTimeout(()=>S(!1),2e3))}catch(a){console.error("Error sharing:",a)}},Z=()=>{if(!O){n.info("Please login to register for the lucky draw"),Y("/login");return}if(s.isUserRegistered){n.info("You are already registered for this lucky draw");return}h(!0)},J=async a=>{var t,u;if(a.preventDefault(),!g||g.length<10){n.error("Please enter a valid phone number");return}try{P(!0);const l=localStorage.getItem("token"),A=await k.post(`${D}/api/lucky-draw/register`,{propertyId:o,phone:g},{headers:{Authorization:`Bearer ${l}`}});A.data.success?(n.success("Successfully registered for the lucky draw!"),L(B=>({...B,isUserRegistered:!0,registeredUsers:(B.registeredUsers||0)+1})),h(!1)):n.error(A.data.message||"Registration failed")}catch(l){console.error("Error registering for lucky draw:",l),n.error(((u=(t=l.response)==null?void 0:t.data)==null?void 0:u.message)||"Failed to register. Please try again.")}finally{P(!1)}},X=()=>{if(!s)return 0;const a=new Date,u=new Date(s.biddingEndDate)-a,l=Math.ceil(u/(1e3*60*60*24));return l>0?l:0},b=()=>X()===0,c=a=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(a).toLocaleDateString(void 0,t)},ee=()=>!M||!s||!s.winner?!1:M.id===s.winner;return V?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 pt-16",children:e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsx(y,{className:"w-12 h-12 text-[var(--theme-color-1)] animate-spin mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Loading Property Details"}),e.jsx("p",{className:"text-gray-600",children:"Please wait..."})]})}):C?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 pt-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-4",children:C}),e.jsxs(F,{to:"/lucky-draw",className:"text-[var(--theme-color-1)] hover:underline flex items-center justify-center",children:[e.jsx(I,{className:"w-4 h-4 mr-1"})," Back to Lucky Draw"]})]})}):s?e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gray-50 pt-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("nav",{className:"flex items-center justify-between mb-8",children:[e.jsxs(F,{to:"/lucky-draw",className:"inline-flex items-center text-[var(--theme-color-1)] hover:text-[var(--theme-hover-color-1)]",children:[e.jsx(I,{className:"w-4 h-4 mr-2"})," Back to Lucky Draw"]}),e.jsx("button",{onClick:Q,className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg\r
              hover:bg-gray-100 transition-colors relative`,children:q?e.jsxs("span",{className:"text-green-600",children:[e.jsx(ie,{className:"w-5 h-5 mr-1"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-5 h-5"}),"Share"]})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-full",children:e.jsx(p,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-800",children:"Lucky Draw Property"}),e.jsxs("p",{className:"text-sm text-amber-700",children:["Registration ",b()?"closed":"open until "+c(s.biddingEndDate)]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"bg-white px-3 py-1.5 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-1.5 text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:[s.registeredUsers>=100?100:s.registeredUsers||0,"/100"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"registrations"})]})})})]})}),b()&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 sm:p-6 mb-6",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-lg sm:text-xl font-semibold text-amber-700 mb-2 sm:mb-3",children:[e.jsx($,{className:"w-5 h-5 sm:w-6 sm:h-6 text-amber-500"}),"Lucky Draw Winner"]}),e.jsx("div",{className:"bg-white rounded-lg p-3 sm:p-4",children:_?e.jsxs("div",{className:"flex justify-center py-3",children:[e.jsx(y,{className:"w-5 h-5 text-amber-500 animate-spin"}),e.jsx("span",{className:"ml-2 text-amber-700 text-sm",children:"Loading winner details..."})]}):i?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-3 pb-3 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx(ge,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:i.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:i.email})]})]}),e.jsx("div",{className:"mt-2 sm:mt-0 sm:ml-auto text-xs",children:e.jsxs("div",{className:`px-2 py-1 rounded-full inline-flex items-center ${i.isEmailVerified?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:[i.isEmailVerified?e.jsx(N,{className:"w-3 h-3 mr-1"}):e.jsx(v,{className:"w-3 h-3 mr-1"}),i.isEmailVerified?"Verified":"Unverified"]})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-3 text-xs sm:text-sm",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"ID:"}),e.jsx("span",{className:"text-gray-800 ml-1 font-mono text-xs break-all",children:i._id})]})}),s.isUserRegistered&&(ee()?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Congratulations! You are the winner!"})]}),e.jsx("p",{className:"mt-1 text-green-600 text-xs sm:text-sm",children:"Our team will contact you shortly with next steps."})]}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-3 text-sm",children:e.jsx("p",{className:"text-blue-700 text-xs sm:text-sm",children:"Thank you for participating! While you weren't selected this time, we have more opportunities coming soon."})}))]}):e.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-orange-500 flex-shrink-0"}),e.jsx("p",{className:"text-orange-700 text-xs sm:text-sm",children:"Winner information is not available at this moment."})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"relative h-[500px] bg-gray-100 rounded-xl overflow-hidden mb-8",children:[e.jsx(T,{mode:"wait",children:e.jsx(d.img,{src:s.image[m],alt:`${s.title} - View ${m+1}`,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"w-full h-full object-cover"},m)}),e.jsxs("div",{className:"absolute top-4 left-4 bg-[var(--theme-investment-card-tag)] text-white px-4 py-2 rounded-lg shadow-md flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Lucky Draw Property"})]}),s.image.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(a=>a===0?s.image.length-1:a-1),className:`absolute left-4 top-1/2 -translate-y-1/2 p-2 rounded-full\r
                    bg-white/80 backdrop-blur-sm hover:bg-white transition-colors`,children:e.jsx(ce,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>x(a=>a===s.image.length-1?0:a+1),className:`absolute right-4 top-1/2 -translate-y-1/2 p-2 rounded-full\r
                    bg-white/80 backdrop-blur-sm hover:bg-white transition-colors`,children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:`absolute bottom-4 left-1/2 -translate-x-1/2 \r
              bg-black/50 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm`,children:[m+1," / ",s.image.length]})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"flex justify-between items-start mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(w,{className:"w-5 h-5 mr-2"}),s.location]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-3xl font-bold text-[var(--theme-color-1)]",children:["â‚¹",Number(s.price).toLocaleString("en-IN")]})}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Market Value"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-lg p-6 mb-6",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-amber-700 mb-3",children:[e.jsx($,{className:"w-5 h-5"}),"Lucky Draw Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Registration Started:"}),e.jsx("span",{className:"font-medium text-gray-900",children:c(s.biddingStartDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Registration Ends:"}),e.jsx("span",{className:"font-medium text-gray-900",children:c(s.biddingEndDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Total Registrations:"}),e.jsx("span",{className:"font-medium text-gray-900",children:((W=s.registrations)==null?void 0:W.length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Draw Date:"}),e.jsx("span",{className:"font-medium text-gray-900",children:c(new Date(new Date(s.biddingEndDate).getTime()+864e5))})]}),s.status==="completed"&&s.winner&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Winner Selected:"}),e.jsx("span",{className:"font-medium text-green-600",children:c(s.updatedAt)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx(oe,{className:"w-6 h-6 text-[var(--theme-color-1)] mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.beds," ",s.beds>1?"Beds":"Bed"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx(me,{className:"w-6 h-6 text-[var(--theme-color-1)] mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.baths," ",s.baths>1?"Baths":"Bath"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx(xe,{className:"w-6 h-6 text-[var(--theme-color-1)] mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.sqft," sqft"]})]})]}),!b()&&!s.isUserRegistered&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:Z,className:`w-full bg-[var(--theme-investment-card-tag)] text-white py-3 rounded-lg \r
                        hover:bg-amber-600 transition-colors flex items-center justify-center gap-2 font-medium`,children:[e.jsx(p,{className:"w-5 h-5"}),"Register for Lucky Draw"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 text-center",children:"Registration is free. You must be logged in to register."})]}),s.isUserRegistered&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-2",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"You're registered for this lucky draw!"})]}),e.jsx("p",{className:"text-sm text-green-600",children:"The winner will be announced after the registration period ends. We'll contact you if you're selected."})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Description"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:s.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Amenities"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.amenities&&s.amenities.map((a,t)=>e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--theme-investment-card-tag)] mr-2"}),a]},t))})]}),e.jsxs("div",{className:"mb-6 bg-gray-50 p-6 rounded-lg",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-[var(--theme-investment-card-tag)]"}),"Lucky Draw Rules"]}),e.jsxs("ul",{className:"space-y-3 text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[var(--theme-investment-card-tag)] mt-2"}),e.jsx("span",{children:"Participants must be registered users of Hybrid Realty"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[var(--theme-investment-card-tag)] mt-2"}),e.jsx("span",{children:"Only one registration per user is allowed"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[var(--theme-investment-card-tag)] mt-2"}),e.jsx("span",{children:"Winners will be selected randomly after the registration period ends"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[var(--theme-investment-card-tag)] mt-2"}),e.jsx("span",{children:"Winners will be notified via email and phone"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[var(--theme-investment-card-tag)] mt-2"}),e.jsx("span",{children:"The lucky draw winner gets exclusive access to purchase this property at a special price"})]})]})]}),e.jsxs("div",{className:"mb-6 bg-blue-50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Have Questions?"}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-3",children:[e.jsx(he,{className:"w-5 h-5 mr-2 text-[var(--theme-color-1)]"}),"9911791469"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Our customer service team is available Monday to Saturday, 9 AM to 6 PM"})]})]})]})]})]}),e.jsx(T,{children:H&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 overflow-y-auto bg-black/60 flex items-center justify-center p-4",children:e.jsxs(d.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Register for Lucky Draw"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-500",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Phone Number"}),e.jsx("input",{type:"tel",id:"phone",value:g,onChange:a=>z(a.target.value),placeholder:"Enter your 10-digit phone number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-[var(--theme-investment-card-tag)] focus:border-[var(--theme-investment-card-tag)]",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"We'll use this to contact you if you win the lucky draw"})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"terms",className:"h-4 w-4 text-[var(--theme-investment-card-tag)] border-gray-300 rounded focus:ring-[var(--theme-investment-card-tag)]",required:!0}),e.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:["I agree to the ",e.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700",children:"terms and conditions"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--theme-investment-card-tag)] text-white rounded-md hover:bg-amber-600 flex items-center justify-center gap-2",disabled:E,children:E?e.jsx(y,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-4 h-4"}),"Register Now"]})})]})]})]})})}),e.jsxs("div",{className:"mt-8 p-6 bg-blue-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[var(--theme-color-1)] mb-4",children:[e.jsx(w,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Location"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:s.location}),e.jsxs("a",{href:`https://maps.google.com/?q=${encodeURIComponent(s.location)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-[var(--theme-color-1)] hover:text-[var(--theme-hover-color-1)]",children:[e.jsx(w,{className:"w-4 h-4"}),"View on Google Maps"]})]})]})}):null};export{je as default};
